
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<meta charset="UTF-8">
<title>Love Letter</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
    height:100vh;
   background:#fff;
    display:flex;
    justify-content:center;
    align-items:center;
    overflow:hidden;
    font-family:"Segoe UI",sans-serif;
    transition:background 2.8s ease;
}
/* n·ªÅn t·ªëi khi m·ªü */
body.open-bg{
      background:#000;
}
/* ================= TIM BAY ================= */
.heart{
    position:absolute;
    bottom:-60px;
    color:rgba(255,20,147,.95);
    pointer-events:none;
    animation:flyUp linear forwards;
}

@keyframes flyUp{
    0%{
        transform:translateY(0) scale(1);
        opacity:1;
    }
    60%{
        transform:translateY(-80vh) scale(0.6);
        opacity:0.9;
    }
    100%{
        transform:translateY(-140vh) scale(0.25);
        opacity:0;
    }
}

/* ===== D√ÅN ·ªû ƒê√ÇY ===== */
 /* ================= IMAGE FLY ================= */
.fly-img{
    position:absolute;
    bottom:-80px;
    width:40px;
    height:40px;
    pointer-events:none;
    animation:imgFly linear forwards;
    opacity:0.95;
}

.fly-img img{
    width:100%;
    height:100%;
    object-fit:contain;
}

@keyframes imgFly{
    0%{
        transform:translateY(0) rotate(0deg) scale(1);
        opacity:1;
    }
    60%{
        transform:translateY(-70vh) rotate(180deg) scale(0.8);
        opacity:0.9;
    }
    100%{
        transform:translateY(-130vh) rotate(360deg) scale(0.4);
        opacity:0;
    }
}


/* ================= SCENE ================= */
.scene{
    position:relative;
    width:420px;
    height:260px;
    cursor:pointer;
}

/* ================= PHONG B√å NGUY√äN ================= */
.envelope-full{
    position:absolute;
    inset:0;
    background:linear-gradient(145deg,#000000,#000000);
    border-radius:18px;
    box-shadow:0 16px 30px rgba(0,0,0,.3);
    z-index:5;
    transition:.6s cubic-bezier(.4,0,.2,1);
    overflow:hidden;
}

.envelope-full::after{
    content:"";
    position:absolute;
    inset:6px;
    border:2px solid rgba(255,255,255,.85);
    border-radius:14px;
}

.flap{
    position:absolute;
    inset:0;
    background:linear-gradient(145deg,#f48ac6,#f877b5);
    clip-path:polygon(0 0,100% 0,50% 48%);
    z-index:3;
}

/* ================= BƒÇNG KEO ================= */
.tape-wrap{
    position:absolute;
    top:100px;
    left:60%;
    width:180px;
    height:34px;
    transform:translateX(-50%);
    z-index:6;
    pointer-events:none;
}

.tape{
    position:absolute;
    inset:0;
    background:linear-gradient(
        90deg,
        rgba(255,255,255,.35),
        rgba(255,255,255,.15),
        rgba(255,255,255,.35)
    );
    border:1px solid rgba(255,255,255,.4);
    border-radius:6px;
    transition:.6s ease;
}

.tape.left,.tape.right{width:50%}

.tape.left{
    left:0;
    clip-path:polygon(0 0,100% 0,85% 50%,100% 100%,0 100%);
}
.tape.right{
    right:0;
    clip-path:polygon(15% 0,100% 0,100% 100%,15% 100%,0 50%);
}

.open .tape.left{
    transform:translateX(-22px) rotate(-8deg);
    opacity:0;
}
.open .tape.right{
    transform:translateX(26px) rotate(10deg);
    opacity:0;
}

/* ================= STICKER ================= */
.stickers{position:absolute;inset:0;z-index:4}

.sticker{
    position:absolute;
    font-size:26px;
    opacity:.9;
    filter:drop-shadow(0 3px 6px rgba(0,0,0,.25));
    animation:wiggle 3s ease-in-out infinite;
}

@keyframes wiggle{
    0%,100%{transform:rotate(var(--r))}
    50%{transform:rotate(calc(var(--r) + 2deg))}
}

.s1{top:70px;left:40px;--r:-8deg}
.s2{top:40px;right:60px;--r:6deg}
.s3{top:120px;right:140px;--r:-6deg}
.s4{bottom:40px;left:150px;--r:5deg}
.s5{bottom:35px;right:40px;--r:-4deg}
.s7{top:20px;left:160px;--r:-5deg}
.s8{bottom:85px;left:80px;--r:6deg}
.s10{bottom:62px;right:82px;--r:4deg}
.s11{bottom:98px;right:46px;--r:-8deg}

/* ================= GI·∫§Y TR√ÅI TIM ================= */
.paper{

text-align:center;
    line-height:1.5;

    position:absolute;
    top:18px;
    left:50%;
    width:260px;
    height:240px;
    background:#f7a3d6;
    transform:translateX(-50%) scale(.7);
    opacity:0;
    transition:.6s cubic-bezier(.4,0,.2,1);
    z-index:1;
    box-shadow:0 14px 30px rgba(0,0,0,.35);
    clip-path:path("M130 240 C130 240,0 150,0 80 C0 30,50 0,90 28 C115 48,130 75,130 75 C130 75,145 48,170 28 C210 0,260 30,260 80 C260 150,130 240,130 240 Z");
    display:flex;
    align-items:center;
    justify-content:center;
    padding:60px 40px;
    text-align:center;
    color:#d6336c;
    font-size:18px;
}

/* ================= PHONG B√å X√â ‚Äì V·∫æT RƒÇNG ================= */
.envelope-split{
    position:absolute;
    inset:0;
    z-index:4;
    opacity:0;
    pointer-events:none;
}

/* khi m·ªü th√¨ cho click */
.open .envelope-split{
    pointer-events:auto;
}

.half{
    position:absolute;
    top:0;
    width:50%;
    height:100%;
    background:linear-gradient(145deg,#f072b6,#e4559a);
    box-shadow:0 16px 30px rgba(0,0,0,.4);
    transition:1s cubic-bezier(.22,.61,.36,1);
}

.left{
    left:0;
    border-radius:18px 0 0 18px;
    clip-path:polygon(
        0 0,100% 0,
        92% 6%,100% 12%,85% 20%,100% 28%,
        88% 36%,100% 44%,82% 52%,100% 60%,
        90% 70%,100% 80%,86% 90%,100% 100%,0 100%
    );
}

.right{
    right:0;
    border-radius:0 18px 18px 0;
    clip-path:polygon(
        8% 0,100% 0,100% 100%,8% 100%,
        0 92%,12% 86%,0 78%,15% 70%,
        0 62%,10% 54%,0 46%,14% 38%,
        0 28%,12% 18%,0 8%
    );
}

/* ================= OPEN ================= */
.open .envelope-full{opacity:0}
.open .envelope-split{opacity:1}
.open .left{transform:translateX(-160px) rotate(-2deg)}
.open .right{transform:translateX(160px) rotate(2deg)}
.open .paper{opacity:1;transform:translateX(-50%) scale(1)}

/* ================= L·ª∞A CH·ªåN TRONG TH∆Ø ================= */
.choice-box{


    position:absolute;
    bottom:24px;
    width:120px;
    height:60px;
    background:#fff;
    border-radius:14px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:600;
    font-size:14px;
    opacity:0;
    transform:scale(.7);
    transition:.6s cubic-bezier(.22,.61,.36,1);
    box-shadow:0 10px 20px rgba(0,0,0,.25);
}
/* ===== IMAGE AFTER ACCEPT ===== */
.choice-image{
    position:absolute;
    bottom:18px;
    width:120px;
    height:80px;
    opacity:0;
    transform:scale(0.7);
    transition:.8s cubic-bezier(.22,.61,.36,1);
    pointer-events:none;
}

.choice-image img{
    width:100%;
    height:100%;
    object-fit:contain;
}

.left-img{ left:18px; }
.right-img{ right:18px; }

.show-images .choice-image{
    opacity:1;
    transform:scale(1);
}
/* g·∫Øn v√†o n·ª≠a th∆∞ */
.left .choice-box{
    left:18px;
    color:#ff4d6d;
}
.right .choice-box{
    right:18px;
    color:#ff2f92;
}

/* hi·ªán khi m·ªü */
.open .choice-box{
    opacity:1;
    transform:scale(1);
}

/* hover cho ƒë√£ */
.choice-box:hover{
    transform:scale(1.08);
    box-shadow:0 0 18px rgba(255,120,180,.9);
}

/* ===== MOBILE FIX ===== */
@media (max-width: 600px){
    .scene{
        width:90vw;
        height:55vw;
        max-width:420px;
        max-height:260px;
    }

    .choice-box{
        font-size:15px;
        height:64px;
    }

    /* mobile kh√¥ng c√≥ hover */
    .choice-box:hover{
        transform:scale(1);
        box-shadow:0 10px 20px rgba(0,0,0,.25);
    }

    .choice-box:active{
        transform:scale(0.95);
        box-shadow:0 0 18px rgba(255,120,180,.9);
    }
}
/* ·∫®n l·ª±a ch·ªçn sau khi ƒë√£ ƒë·ªìng √Ω */
.hide-choice .choice-box{
    opacity:0 !important;
    pointer-events:none !important;
    transform:scale(0.6) !important;
}
/* ===== HEART EXPLODE ===== */
.heart.explode{
    animation:heartExplode .8s ease-out forwards !important;
}

@keyframes heartExplode{
    0%{
        transform:scale(1);
        opacity:1;
    }
    40%{
        transform:scale(2.5) rotate(20deg);
        opacity:1;
    }
    100%{
        transform:scale(0.2) rotate(-20deg);
        opacity:0;
    }
}


</style>
</head>

<body>

<div class="scene" id="scene">

  <div class="paper" id="paperText">
    Em ƒê·ªìng √ù L√†m Ng∆∞·ªùi Y√™u Anh Nh√© üíó
</div>


    <div class="envelope-full">
        <div class="flap"></div>

        <div class="tape-wrap">
            <div class="tape left"></div>
            <div class="tape right"></div>
        </div>

        <div class="stickers">
            <span class="sticker s1">üå∏</span>
            <span class="sticker s2">‚ú®</span>
            <span class="sticker s3">üíñ</span>
            <span class="sticker s4">üß∏</span>
            <span class="sticker s5">üåº</span>
            <span class="sticker s7">üéÄ</span>
            <span class="sticker s8">üçì</span>
            <span class="sticker s10">üå∑</span>
            <span class="sticker s11">‚ú®</span>
        </div>
    </div>

  <div class="envelope-split">
  <div class="half left">
    <div class="choice-box no">‚ùå Kh√¥ng ƒë·ªìng √Ω</div>

<div class="choice-image left-img">
    <img src="https://scontent.fhph6-1.fna.fbcdn.net/v/t39.30808-6/625125164_1583840766095052_7656056307583111110_n.jpg?_nc_cat=106&ccb=1-7&_nc_sid=833d8c&_nc_ohc=wIUBq8sNacoQ7kNvwHj_hUH&_nc_oc=AdlNiJjAOlizIh3w0oFDxjo89LfUDnpUrJ3m03M0cLgndg_aZ7UOwKJJij07sh_CUhgQSiFVypWa0QTVZU0XGLMz&_nc_zt=23&_nc_ht=scontent.fhph6-1.fna&_nc_gid=Ij1xwJYnybH0DDT0wLKTJw&oh=00_Afump8N2k-DnVVzJTlpXVDMdFjVtFf4qakpAled54gLl5A&oe=698403B7" alt="">
 </div> 
</div>
<div class="half right">
    <div class="choice-box yes">üíñ ƒê·ªìng √Ω</div>

<div class="choice-image right-img">
    <img src="https://scontent.fhph6-1.fna.fbcdn.net/v/t39.30808-6/625125164_1583840766095052_7656056307583111110_n.jpg?_nc_cat=106&ccb=1-7&_nc_sid=833d8c&_nc_ohc=wIUBq8sNacoQ7kNvwHj_hUH&_nc_oc=AdlNiJjAOlizIh3w0oFDxjo89LfUDnpUrJ3m03M0cLgndg_aZ7UOwKJJij07sh_CUhgQSiFVypWa0QTVZU0XGLMz&_nc_zt=23&_nc_ht=scontent.fhph6-1.fna&_nc_gid=Ij1xwJYnybH0DDT0wLKTJw&oh=00_Afump8N2k-DnVVzJTlpXVDMdFjVtFf4qakpAled54gLl5A&oe=698403B7" alt="">
 </div> 

</div>

</div>

<script>
let opened = false;
let acceptedOnce = false;
let secondOpen = false;
let heartInterval = null;

const scene = document.getElementById("scene");
const paperText = document.getElementById("paperText");
const yesBtn = document.querySelector(".yes");
const noBtn = document.querySelector(".no");

/* ================= HEART ================= */
function spawnHearts(n){
    for(let i=0;i<n;i++){
        const h=document.createElement("div");
        h.className="heart";
        h.innerText=Math.random()>0.5?"‚ù§":"üíó";
        h.style.left=Math.random()*100+"vw";
        h.style.fontSize=14+Math.random()*30+"px";
        h.style.animationDuration=4+Math.random()*5+"s";
        document.body.appendChild(h);
        setTimeout(()=>h.remove(),10000);
    }
}

/* ================= IMAGE FLY ================= */
const flyImages = [
    "https://scontent.fhph6-1.fna.fbcdn.net/v/t39.30808-6/625749368_1583840792761716_5674888865992237104_n.jpg?_nc_cat=101&ccb=1-7&_nc_sid=833d8c&_nc_ohc=8QAWtyIDazYQ7kNvwGP5XIl&_nc_oc=AdnupJMFazZj9D3YhIkPDJQgklSJ9dwvc585LGsaJ7tFZN-ydUmGdeOcLAJ9x5h9hhgIjlZf8KiG8A6vZmgljLk3&_nc_zt=23&_nc_ht=scontent.fhph6-1.fna&_nc_gid=ijqOXSFTiPrUezufx7C3gg&oh=00_AfsOBHA42sVWakM3NLioSPEYaVNUNty5l2t06NbqdUWqZw&oe=6983E500",
    "https://scontent.fhph6-1.fna.fbcdn.net/v/t39.30808-6/623354674_1583840669428395_8445195578668405702_n.jpg?_nc_cat=111&ccb=1-7&_nc_sid=833d8c&_nc_ohc=SVbHgmSvXhgQ7kNvwHuj_Pw&_nc_oc=Adkb60qeOF51YWZBOv6mcPrZut5EnAStriVe9XCjzaheDHR8eU0T-5DL750Jzbf6dC7kBQIx4LuvGWTu3WvhIKJH&_nc_zt=23&_nc_ht=scontent.fhph6-1.fna&_nc_gid=3vkHIUrUgmTAkKddt0e9Fg&oh=00_Afv2qqsIB06w7Z_5aQr2FZf0lcaLmxwpfcrIMSqxtjlRrQ&oe=6983D1D8",
    "https://scontent.fhph6-1.fna.fbcdn.net/v/t39.30808-6/625439212_1583840572761738_612833424287675343_n.jpg?_nc_cat=104&ccb=1-7&_nc_sid=833d8c&_nc_ohc=ndmvzrNgjw8Q7kNvwHGaNbB&_nc_oc=AdkPjPUD_AUvTUauSz6bxJgbZTMOw2V6wWnwrDk4yLYhLrBBB-x58mkUjxvvKojBI84AMokoWD0wNosjLDeyrUS2&_nc_zt=23&_nc_ht=scontent.fhph6-1.fna&_nc_gid=1KnBFVxhfiJAodLJp6qZZg&oh=00_AfsOZe3MVkomfxy215cahJxDPJbLobQGMBRotPIADEA1FA&oe=6983FB4C",
    "https://scontent.fhph6-1.fna.fbcdn.net/v/t39.30808-6/623764854_1583840599428402_5637815571405437436_n.jpg?_nc_cat=103&ccb=1-7&_nc_sid=833d8c&_nc_ohc=v-8QG-3e2vQQ7kNvwEXQqZu&_nc_oc=AdnYC5OYP-a9fdgpyRtIjHGtDQB2RtF0WzFHGIOas3LJ_uzd5Psfo8wOxiKYqcLWY7zRuE2OfrbBRvjXQ86DbIlt&_nc_zt=23&_nc_ht=scontent.fhph6-1.fna&_nc_gid=tQHuXUhVnLuFVzyycb6sWQ&oh=00_AfuldElkQsX03SEJMCTKbK-zts5pz-z37ZS8icQ3y9YdIg&oe=6983D988",
    "https://scontent.fhph6-1.fna.fbcdn.net/v/t39.30808-6/625062738_1583840752761720_3859346863118112_n.jpg?_nc_cat=100&ccb=1-7&_nc_sid=833d8c&_nc_ohc=l74nsFcaPyUQ7kNvwHjf4S2&_nc_oc=Adnlo_KVQ4_gVR55qAReHp9H6iF5TCmshdMrrQqcCL2ieBq9iWH5Jn4LDPy5ODLY8CxbxSnrdOt-dkRshHKQ1nlB&_nc_zt=23&_nc_ht=scontent.fhph6-1.fna&_nc_gid=tAtkOniYFSrKYyn3kBXrIg&oh=00_AfunrJNMQT8lbh5JzWahhRyCpZmaUUuipof_YZA-1lNOJg&oe=6983F391",
    "https://scontent.fhph6-1.fna.fbcdn.net/v/t39.30808-6/625640592_1583840689428393_8644395301423919136_n.jpg?_nc_cat=108&ccb=1-7&_nc_sid=833d8c&_nc_ohc=3xkZup1po5YQ7kNvwFPClYe&_nc_oc=AdkzEoggDHf_oka8ghQhLQUgPyfeIVj8ommDPRGtnZIJ8pMYuVs1niydigBjxe34eJi7cvfQxDoWX3lPP2bj_ZNR&_nc_zt=23&_nc_ht=scontent.fhph6-1.fna&_nc_gid=LqM6fYDYlvKAcvRD6054dw&oh=00_Afs_DkHxhL8JS1i1z0seqTFH548_yy0wYUg99k0gaU_67Q&oe=698404C2",
    "https://scontent.fhph6-1.fna.fbcdn.net/v/t39.30808-6/622523147_1583840736095055_1152309298124873408_n.jpg?_nc_cat=106&ccb=1-7&_nc_sid=833d8c&_nc_ohc=djfWnWCk2Z8Q7kNvwFZ0wyW&_nc_oc=AdljJlw3C53afACiK3YvzV9kkhDvKeoAnQD8ryuijQMSZz185zVInqjGC7_5y2f41k-6Wpw-wKSHM4J7JQQzn_-7&_nc_zt=23&_nc_ht=scontent.fhph6-1.fna&_nc_gid=7xWw_REtG7UQCbWT8CRaGA&oh=00_AfurjPuRlJqk-tcNG7VQROb95KQeuqgBzGf2iroAVm8VTA&oe=6983FE39",
    "https://scontent.fhph6-1.fna.fbcdn.net/v/t39.30808-6/621837090_1583840639428398_5635436670653938588_n.jpg?_nc_cat=101&ccb=1-7&_nc_sid=833d8c&_nc_ohc=UyNeLSDu0KoQ7kNvwGBdtFH&_nc_oc=AdlQjhUu4XzzlMkjLB-0xpHhQV-QrljdcUVliE5jDppMi8HJ5kwNVOYldaScoOyqTpz4AZH5PUh99kjN_TH8ISBJ&_nc_zt=23&_nc_ht=scontent.fhph6-1.fna&_nc_gid=3FaxbLr-0I68ftswfYCMig&oh=00_AfsGa-HBrjwLAuxkt3RZznLIkr3M7Og2EhuJQt1zfqk4Zw&oe=6983F852",
   "https://scontent.fhph6-1.fna.fbcdn.net/v/t39.30808-6/625777168_1583871306091998_5906708461395029140_n.jpg?_nc_cat=111&ccb=1-7&_nc_sid=833d8c&_nc_ohc=5uQFGOqgIEEQ7kNvwEV4xw0&_nc_oc=AdnSsgsUpM2VmNEAa-mEm9y8mQ6OWsyAUDCrOtT7TJFO0St3cpJ1KaU3poPSSXsShTLFFdohX6fMt3cp08nuz3Wf&_nc_zt=23&_nc_ht=scontent.fhph6-1.fna&_nc_gid=wdsuCcVQlwsbBGbn0wj5Ig&oh=00_Afs0Z3WIWpjaCUV_fZkrtMG2p_z-RUmoFeWD9V23fC52QA&oe=6983EB9E",
    "https://scontent.fhph6-1.fna.fbcdn.net/v/t39.30808-6/625189414_1583871339425328_6201692962096736026_n.jpg?_nc_cat=100&ccb=1-7&_nc_sid=833d8c&_nc_ohc=pb55mIQUCiMQ7kNvwFnPvJ0&_nc_oc=AdkObDzh4Jnx3BXGYBlEwnNQ0E_EtGRkgR1WoVxo-F_tQ0U3mNdGaNobdg9473EY5JcazFhWbAMfzm8-iDLJFeIM&_nc_zt=23&_nc_ht=scontent.fhph6-1.fna&_nc_gid=lubUqqFR9SY-KSlVS4affw&oh=00_AfsMyJcrEE05gMjyZ3Glcwlb5j8vo1ciNt9_946-ZpSjYQ&oe=6983EB94",
"https://scontent.fhph6-1.fna.fbcdn.net/v/t39.30808-6/624340999_1583871449425317_1472322989713907264_n.jpg?_nc_cat=109&ccb=1-7&_nc_sid=833d8c&_nc_ohc=gPEX-Z-RddkQ7kNvwGzz7MK&_nc_oc=AdmEFxQ43iIRUXTgDr5hEgjbscv-Zp9lTHcotdTlkOh9x-PFPZcHcsOeIGzOvKEQ1el4M55fCDq5c4DsCLjmmXZR&_nc_zt=23&_nc_ht=scontent.fhph6-1.fna&_nc_gid=eEHHsc33hsnKiRziFcdoNg&oh=00_AfuX964Bzq4elB7yxVzEP6YdjzYe4W7yYUX4YBCqAdKrnA&oe=69840F7B",
"https://scontent.fhph6-1.fna.fbcdn.net/v/t39.30808-6/622679468_1583871419425320_4112443196289857112_n.jpg?_nc_cat=104&ccb=1-7&_nc_sid=833d8c&_nc_ohc=NKJORpK2zqAQ7kNvwEGYYKN&_nc_oc=Adl0AHsopwqvaIST-ut4eQWGzjoEHMCiYt8CTOBaUxCvUBZldB4qwBilWrd47btbrnLVxO8RHeqn2LZPt5XwpICc&_nc_zt=23&_nc_ht=scontent.fhph6-1.fna&_nc_gid=LNMBO8e5BsF_6rCGi67BIw&oh=00_AfusKwSGlIocaOAJXTukk_E4sux-fPVSoLt5Pp5yV6Xhjw&oe=69840731",
"https://scontent.fhph6-1.fna.fbcdn.net/v/t39.30808-6/624328727_1583871296091999_4629091960444295963_n.jpg?_nc_cat=110&ccb=1-7&_nc_sid=833d8c&_nc_ohc=34D50YOWIc4Q7kNvwFL5fAQ&_nc_oc=AdnE5jZIYp1NY2yYEMmMyFjAwN9zhmf4hQpB7sHxjkvUX-RqriyGQFqoXRGjCMflJcnIawpAC_u7XLm7qWrf1hX2&_nc_zt=23&_nc_ht=scontent.fhph6-1.fna&_nc_gid=8809jlgZw9aE-Algd5p8ow&oh=00_AfvVDrW1Rs4_FLd4tEcAdaxjMSKcuPvwnPyuLW8LSB4yzg&oe=698403BB",
"https://scontent.fhph6-1.fna.fbcdn.net/v/t39.30808-6/624999265_1583871432758652_7468401184026763746_n.jpg?_nc_cat=100&ccb=1-7&_nc_sid=833d8c&_nc_ohc=JLoljLQTlVoQ7kNvwFCIZFX&_nc_oc=AdkhDpSUUz9aLTwo1tltdzxXCrLCBUmKxE_lzEJt6qOh9N6mCaJZGN2NYhpGKoqNpVKzJbVlqFsBkB3jeCN7cACE&_nc_zt=23&_nc_ht=scontent.fhph6-1.fna&_nc_gid=tK-hEpcoWblNXtL9-vVTFw&oh=00_AftMUS-54dZMtM6lakJQKIO8etJzmiUGoPKqpMCDHjPg-g&oe=6983EA29",
"https://scontent.fhph6-1.fna.fbcdn.net/v/t39.30808-6/625905017_1583871372758658_8009687802796256263_n.jpg?_nc_cat=106&ccb=1-7&_nc_sid=833d8c&_nc_ohc=yV8VtCwbBQMQ7kNvwG8Zygf&_nc_oc=Adk2WsT7q8JIaMy1emNflW_YOCDtAoMJkCVsCFgOdq61gQ2UoyJMMmJdnwsclbMOUqRwgagxZdsnDMD4yvT9J3mS&_nc_zt=23&_nc_ht=scontent.fhph6-1.fna&_nc_gid=_GGnUtwJjDSlaPmnIHkmjA&oh=00_Afs7qkK_k31qgbCpK1Z08nyBnq38BIaFr_AH35wNDUtjwA&oe=6983E573",
];
function spawnImages(n){
    for(let i=0;i<n;i++){
        const wrap = document.createElement("div");
        wrap.className = "fly-img";

        const img = document.createElement("img");
        img.src = flyImages[Math.floor(Math.random()*flyImages.length)];

        wrap.appendChild(img);

        wrap.style.left = Math.random()*100 + "vw";
        const size = 120 + Math.random()*60; // 70px ‚Üí 110px
wrap.style.width = size + "px";
wrap.style.height = size + "px";
        wrap.style.animationDuration = 5 + Math.random()*4 + "s";

        document.body.appendChild(wrap);
        setTimeout(()=>wrap.remove(),10000);
    }
}




function explodeAllHearts(){





    document.querySelectorAll(".heart").forEach(h=>{
        h.classList.add("explode");
        setTimeout(()=>h.remove(),800);
    });
}

/* ================= RESET ALL EFFECT ================= */
function resetAllEffects(){
    clearInterval(heartInterval);
    heartInterval = null;

    document.querySelectorAll(".heart").forEach(h => h.remove());
    document.querySelectorAll(".fly-img").forEach(img => img.remove());
}


/* ================= CLICK PHONG B√å ================= */
scene.onclick = () => {
    opened = !opened;

    scene.classList.toggle("open", opened);
    document.body.classList.toggle("open-bg", opened);

  if(opened){
    resetAllEffects(); // d·ªçn s·∫°ch tr∆∞·ªõc khi ch·∫°y m·ªõi

    if(secondOpen){
        paperText.innerText = "Anh bi·∫øt em s·∫Ω ƒë·ªìng √Ω m√† üíï";
        scene.classList.add("hide-choice");
        scene.classList.add("show-images");

        spawnHearts(100);
        spawnImages(6);

        heartInterval = setInterval(()=>{
            spawnHearts(8);
            spawnImages(1);
        },350);

    }else{
        paperText.innerText = "Em ƒê·ªìng √ù L√†m Ng∆∞·ªùi Y√™u Anh Nh√© üíó";
        scene.classList.remove("hide-choice");
        scene.classList.remove("show-images");

        spawnHearts(40);
        heartInterval = setInterval(()=>{
            spawnHearts(10);
        },150);
    }

}else{
    resetAllEffects();

    acceptedOnce = false;
    secondOpen = false;

    scene.classList.remove("show-images");
    scene.classList.remove("hide-choice");

    paperText.innerText = "Em ƒê·ªìng √ù L√†m Ng∆∞·ªùi Y√™u Anh Nh√© üíó";
    noBtn.innerText = "‚ùå Kh√¥ng ƒë·ªìng √Ω";
}

    
}

/* ================= ƒê·ªíNG √ù ================= */
yesBtn.onclick = e => {
    e.stopPropagation();

    if(!acceptedOnce){
        acceptedOnce = true;
        secondOpen = true;

        explodeAllHearts();






        opened = false;
        scene.classList.remove("open");
        document.body.classList.remove("open-bg");
        clearInterval(heartInterval);
    }
};

/* ================= KH√îNG ƒê·ªíNG √ù ================= */
noBtn.onclick = e => {
    e.stopPropagation();
    noBtn.innerText = "Em ph·∫£i ƒë·ªìng √Ω üò§üíó";
};

/* ================= MOBILE ================= */
scene.addEventListener("touchstart", e=>{
    if(e.target.closest(".choice-box")) return;
    scene.onclick();
});

yesBtn.addEventListener("touchstart", e=>{
    e.preventDefault();
    e.stopPropagation();
    yesBtn.onclick(e);
});

noBtn.addEventListener("touchstart", e=>{
    e.preventDefault();
    e.stopPropagation();
    noBtn.onclick(e);
});
</script>




</body>
</html>


